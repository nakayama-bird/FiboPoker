<!--
Sync Impact Report
==================
Version: 0.0.0 → 0.0.1 (Initial constitution creation)
Modified principles: N/A (Initial version)
Added sections: All core principles (I-VII) and governance
Removed sections: None
Templates status:
  ✅ plan-template.md - Verified alignment with simplicity and single-page state management
  ✅ spec-template.md - Verified alignment with user story prioritization
  ✅ tasks-template.md - Verified alignment with independent testing approach
Follow-up TODOs: None
-->

# FiboPoker Constitution

## Core Principles

### I. Simplicity First

すべての実装は最小限の複雑さで最大の価値を提供することを目指します。

- **技術選択**: 必要最小限のライブラリと依存関係のみを使用
- **機能スコープ**: MVPの定義を明確にし、段階的な機能追加を優先
- **コード品質**: 読みやすく、保守しやすいコードを常に優先
- **アーキテクチャ**: YAGNI原則に従い、現在必要な機能のみを実装

**根拠**: フィボナッチポーカーはシンプルなツールです。過度な抽象化や不要な技術スタックは開発速度を低下させ、保守コストを増大させます。

### II. User-First Experience

ユーザーエクスペリエンスを常に最優先します。

- **直感的なUI**: 説明不要で使えるインターフェース設計
- **高速なレスポンス**: ユーザーアクションに対する即座のフィードバック
- **リアルタイム性**: WebSocketによる即座の状態同期
- **アクセシビリティ**: キーボード操作とスクリーンリーダー対応

**根拠**: プランニングポーカーはチームの効率的なコミュニケーションツールです。使いにくいツールはチームの生産性を下げます。

### III. Independent Testing

すべてのユーザーストーリーは独立してテスト可能である必要があります。

- **ストーリー分割**: 各ユーザーストーリーは単独で価値を提供
- **テスト独立性**: 他のストーリーに依存しないテストシナリオ
- **MVP段階実装**: 各ストーリーが独立したMVPとして機能
- **段階的デリバリー**: 優先度順に機能を提供

**根拠**: 独立したテストとデリバリーにより、リスクを最小化し、早期フィードバックを得ることができます。

### IV. Event-Driven State Management

シンプルで効率的なイベント駆動の状態管理を実現します。

- **完了検知**: 全員の見積もり完了を自動検知し、即座に結果を配信
- **技術選択**: Server-Sent Events (SSE) またはロングポーリングを使用（WebSocketより軽量）
- **統計情報の算出**: 全員の見積もり後に最大値、最低値、中央値、平均値を自動算出・表示
- **楽観的UI更新**: ユーザーアクションには即座に視覚的フィードバック
- **エラー回復**: 接続断時の自動再接続と明確なエラー表示

**根拠**: 定期ポーリングは無駄なリクエストを発生させます。イベント駆動アプローチは、必要な時だけサーバーとの通信を行い、効率的かつ即座に結果を取得できます。SSE/ロングポーリングはWebSocketより実装がシンプルで、HTTPベースのため既存インフラと相性が良いです。

### V. Privacy & Security First

ユーザーのプライバシーを最大限尊重し、セキュリティリスクを最小化します。

- **最小限の認証情報**: ユーザー認証情報は可能な限り保持しない
- **セッションベース**: 一時的なセッショントークンのみを使用
- **データ保持期間**: 見積もりセッション終了後のデータ自動削除オプション
- **透明性**: どのデータを保存するか明示的に通知

**根拠**: プライバシーはユーザー信頼の基盤です。不要なデータ保持はセキュリティリスクを増大させ、法的コンプライアンスの負担を増やします。

### VI. Performance & Scalability

適切なパフォーマンス目標を設定し、測定可能にします。

- **レスポンスタイム**: ユーザーアクションに対して300ms以内の応答
- **イベント配信**: 全員の見積もり完了後、1秒以内に結果を全参加者に配信
- **接続維持**: SSE/ロングポーリング接続は最大60秒でタイムアウト・再接続
- **同時接続**: 1ルームあたり最大20人の参加者をサポート
- **モニタリング**: パフォーマンスメトリクスの継続的な監視

**根拠**: イベント駆動アーキテクチャでは、完了検知から配信までの遅延を最小化することが重要です。適切なタイムアウト設定により、サーバー負荷とレスポンス性のバランスを取ります。

### VII. Single-Page State Management

単一ページでの状態管理により、シンプルで直感的なユーザー体験を実現します。

- **URLベースルーティング**: 単一URLでセッション全体を管理
- **状態駆動UI**: データベースの状態変更でコンポーネントを切り替え
- **ページ遷移の回避**: 複数ページ間の遷移による状態不整合を防止
- **ナビゲーション統一**: 一貫した戻る動線の提供
- **コンポーネント分離**: 各状態を独立したコンポーネントとして実装可能

**根拠**: 複数ページ間の遷移は状態管理を複雑にし、ブラウザ履歴との整合性問題を引き起こします。単一ページパターンは状態の一貫性を保ち、リアルタイム更新との相性が良く、実装もシンプルになります。

## Development Workflow

### Test-Driven Development

機能実装の前にテストを書くことを推奨します（必須ではありません）。

- **仕様からテスト**: ユーザーストーリーの受け入れ基準をテストケースに変換
- **テスト駆動設計**: テストから設計の改善点を発見
- **継続的テスト**: すべてのPRでテストを実行
- **テストカバレッジ**: 重要なビジネスロジックは100%カバレッジ目標

### Code Review Standards

すべてのコード変更はレビューを経て統合されます。

- **PR単位**: 機能追加は小さく、レビュー可能なPRに分割
- **セルフレビュー**: PR作成者は提出前に自己レビューを実施
- **レビュー観点**: 機能性、可読性、テスト、パフォーマンス、セキュリティ
- **承認プロセス**: 最低1名の承認後にマージ可能

### Documentation Requirements

コードは自己文書化を目指しますが、重要な決定は文書化します。

- **README**: プロジェクトの概要、セットアップ手順、使用方法
- **API仕様**: すべてのAPIエンドポイントを明確に文書化
- **アーキテクチャ決定**: 重要な技術選択の理由を記録
- **ユーザーガイド**: 主要機能の使用方法を説明

## Governance

この憲法はFiboPokerプロジェクトのすべての開発実践に優先します。

- **遵守義務**: すべてのPRとコードレビューでこの憲法への準拠を確認
- **憲法改定**: 原則の追加・変更は明示的な合意と文書化が必要
- **例外処理**: 憲法との矛盾が発生した場合、その理由と代替案を明確に文書化
- **継続的改善**: プロジェクトの成長に合わせて憲法を定期的に見直し

**Version**: 0.0.1 | **Ratified**: 2025-12-31 | **Last Amended**: 2025-12-31
